<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>baseball on Statistically Significant</title>
    <link>/categories/baseball/</link>
    <description>Recent content in baseball on Statistically Significant</description>
    <generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator>
    <language>en-us</language>
    <lastBuildDate>Tue, 22 Apr 2014 00:00:00 +0000</lastBuildDate>
    
	    <atom:link href="/categories/baseball/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Yet Another Baseball Defense Statistic</title>
      <link>/2014/04/22/yet-another-baseball-defense-statistic/</link>
      <pubDate>Tue, 22 Apr 2014 00:00:00 +0000</pubDate>
      
      <guid>/2014/04/22/yet-another-baseball-defense-statistic/</guid>
      <description>

&lt;p&gt;&lt;a href=&#34;http://www.fangraphs.com&#34; target=&#34;_blank&#34;&gt;Fangraphs&lt;/a&gt; recently published an interesting dataset that measures defensive efficiency of fielders. For each player, the &lt;a href=&#34;http://www.fangraphs.com/blogs/inside-edge-fielding-data/&#34; target=&#34;_blank&#34;&gt;Inside Edge&lt;/a&gt; dataset breaks their opportunities to make plays into five categories, ranging from almost impossible to routine. It also records the proportion of times that the player successfully made the play. With this data, we can see how successful each player is for each type of play. I wanted to think of a way to combine these five proportions into one fielding metric. From here on, I will assume that there is no error in categorizing a play as easy or hard and that there is no bias in the categorizations.&lt;/p&gt;

&lt;h3 id=&#34;model&#34;&gt;Model&lt;/h3&gt;

&lt;p&gt;The model I will build is motivated by &lt;a href=&#34;http://en.wikipedia.org/wiki/Ordered_logit&#34; target=&#34;_blank&#34;&gt;ordinal regression&lt;/a&gt;. If we only were concerned with the success rate in one of the categories, we could use standard logistic regression, and the probability that player $i$ successfully made a play would be assumed to be $\sigma(\theta_i)$, where $\sigma()$ is the &lt;a href=&#34;https://en.wikipedia.org/wiki/Logistic_function&#34; target=&#34;_blank&#34;&gt;logistic function&lt;/a&gt;. Using our prior knowledge that plays categorized as easy should have a higher success rate than plays categorized as difficult, I would like to generalize this.&lt;/p&gt;

&lt;p&gt;Say there are only two categories: easy and hard. We could model the probability that player $i$ successfully made an hard play as $\sigma(\theta_i)$ and the probability that he made an easy play as $\sigma(\theta_i+\gamma)$. Here, we would assume that $\gamma$ is the same for all players. This assumption implies that if player $i$ is better than player $j$ at easy plays, he will also be better at hard plays. This is a reasonable assumption, but maybe not true in all cases.&lt;/p&gt;

&lt;p&gt;Since we have five different categories of difficulty, we can generalize this by having $\gamma_k, k=1,\ldots,4$. Again, these $\gamma_k$&amp;rsquo;s would be the same for everyone. A picture of what this looks like for shortstops is below. In this model, every player will effectively be shifting the curve either left or right. A positive $\theta_i$ means the player is better than average and cause the curve to shift left and vice versa for negative $\theta_i$.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;/img/InsideEdge/LogitOrdered.png&#34; alt=&#34;Logit Ordered&#34; /&gt;&lt;/p&gt;

&lt;p&gt;I modeled this as a multi-level mixed effects model, with the players being random effects and the $\gamma_k$&amp;rsquo;s being fixed. Technically, I should optimize subject to the condition that the $\gamma_k$&amp;rsquo;s are increasing, but the unconstrained optimization always yields increasing $\gamma_k$&amp;rsquo;s because there is a big difference between success rate in the categories. I used combined data from 2012 and 2013 seasons and included all players with at least one success and one failure. I modeled each position separately. Modeling player effects as random, there is a fair amount of regression to the mean built in. In this sense, I am more trying to estimate the true ability of the player, rather than measuring what he did during the two years. This is an important distinction, which may differ from other defensive statistics.&lt;/p&gt;

&lt;h3 id=&#34;model-fit&#34;&gt;Model fit&lt;/h3&gt;

&lt;p&gt;Below is a summary of the results of the model for shortstops. I am only plotting the players with the at least 800 innings, for readability. A bonus of modeling the data like this is that we get standard error estimates as a result. I plotted the estimated effect of each player along with +/- 2 standard errors. We can be fairly certain that the effects for the top few shortstops is greater than 0 since their confidence intervals do not include 0. The same is true for the bottom few. Images for the other positions can be found &lt;a href=&#34;https://github.com/andland/andland.github.com/tree/master/images/InsideEdge&#34; target=&#34;_blank&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;/img/InsideEdge/SSlist.png&#34; alt=&#34;Results for Shortstops&#34; /&gt;&lt;/p&gt;

&lt;p&gt;The results seem to make sense for the most part. Simmons and Tulowitzki have reputations as being strong defenders and Derek Jeter has a reputation as a poor defender.&lt;/p&gt;

&lt;p&gt;Further, I can validate this data by comparing it to other defensive metrics. One that is readily available on Fangraphs is UZR per 150 games. For each position, I took the correlation of my estimated effect with UZR per 150 games, weighted by the number of innings played. Pitchers and catchers do not have UZR&amp;rsquo;s so I cannot compare them. The correlations, which are in the plot below, range from about 0.2 to 0.65.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;/img/InsideEdge/CorrelationWithUZR.png&#34; alt=&#34;Correlation with UZR&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;interpreting-parameters&#34;&gt;Interpreting parameters&lt;/h3&gt;

&lt;p&gt;In order to make this fielding metric more useful, I would like to convert the parameters to something more interpretable. One option which makes a lot of sense is &amp;ldquo;plays made above/below average&amp;rdquo;. Given an estimated $\theta_i$ for a player, we can calculate the probability that he would make a play in each of the five categories. We can then compare those probabilities to the probability an average player would make a play in each of the categories, which would be fit with $\theta=0$. Finally, we can weight these differences in probabilities by the relative rate that plays of various difficulties occur.&lt;/p&gt;

&lt;p&gt;For example, assuming there are only two categories again, suppose a player has a 0.10 and 0.05 higher probability than average of making hard and easy plays, respectively. Further assume that 75% of all plays are hard and 25% are easy. On a random play, the improvement in probability over an average player of making a play is $.10(.75)+.05(.25)=0.0875$. If a player has an opportunity for 300 plays in an average season, this player would be $300 \times 0.0875=26.25$ plays better than average over a typical season.&lt;/p&gt;

&lt;p&gt;I will assume that the number of opportunities to make plays is directly related to the number of innings played. To convert innings to opportunities, I took the median number of opportunities per inning for each position. For example, shortstops had the highest opportunities per inning at 0.40 and catchers had the lowest at 0.08. The plot below shows the distribution of opportunities per inning for each position.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;/img/InsideEdge/PlaysPerInning.png&#34; alt=&#34;Plays Per Inning by Position&#34; /&gt;&lt;/p&gt;

&lt;p&gt;We can extend this to the impact on saving runs from being scored as well by assuming each successful play saves $x$ runs. I will not do this for this analysis.&lt;/p&gt;

&lt;h3 id=&#34;results&#34;&gt;Results&lt;/h3&gt;

&lt;p&gt;&lt;img src=&#34;/img/InsideEdge/shiny.png&#34; alt=&#34;Shiny app&#34; /&gt;&lt;/p&gt;

&lt;p&gt;[&lt;strong&gt;Update&lt;/strong&gt;: The Shiny app is no longer live, but you can view the resulting estimates in the &lt;a href=&#34;https://github.com/andland/InsideEdgeFielding/blob/master/Shiny/InsideEdgeModelResults.csv&#34; target=&#34;_blank&#34;&gt;Github repository&lt;/a&gt;.]&lt;/p&gt;

&lt;p&gt;Finally, I put together a &lt;a href=&#34;http://www.rstudio.com/shiny/&#34; target=&#34;_blank&#34;&gt;Shiny&lt;/a&gt; app to display &lt;a href=&#34;https://github.com/andland/InsideEdgeFielding/blob/master/Shiny/InsideEdgeModelResults.csv&#34; target=&#34;_blank&#34;&gt;the results&lt;/a&gt;. You can search by team, position, and innings played. A team of &amp;lsquo;- - -&amp;rsquo; means the player played for multiple teams over this period. You can also choose to display the results as a rate statistic (extra plays made per season) or a count statistic (extra plays made over the two seasons). To get a seasonal number, I assume position players played 150 games with 8.5 innings in each game. For pitchers, I assumed that they pitched 30 games, 6 innings each.&lt;/p&gt;

&lt;h3 id=&#34;conclusions-and-future-work&#34;&gt;Conclusions and future work&lt;/h3&gt;

&lt;p&gt;I don&amp;rsquo;t know if I will do anything more with this data, but if I could do it again, I may have modeled each year separately instead of combining the two years together. With that, it would have been interesting to model the effect of age by observing how a player&amp;rsquo;s ability to make a play changes from one year to the next. I also think it would be interesting to see how changing positions affects a players efficiency. For example, we could have a $9 \times 9$ matrix of fixed effects that represent the improvement or degradation in ability as a player switches from their main position to another one. Further assumptions would be needed to make sure the $\theta$&amp;rsquo;s are on the same scale for every position.&lt;/p&gt;

&lt;p&gt;At the very least, this model and its results can be considered another data point in the analysis of a player&amp;rsquo;s fielding ability. One thing we need to be concerned about is the classification of each play into the difficultness categories. The human eye can be fooled into thinking a routine play is hard just because a fielder dove to make the play, when a superior fielder could have made it look easier.&lt;/p&gt;

&lt;h3 id=&#34;code&#34;&gt;Code&lt;/h3&gt;

&lt;p&gt;I have put the R code together to do this analysis in &lt;a href=&#34;https://gist.github.com/andland/c6adb69ea365c2580859&#34; target=&#34;_blank&#34;&gt;a gist&lt;/a&gt;. If there is interest, I will put together a repo with all the data as well.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Update&lt;/strong&gt;: I have a &lt;a href=&#34;https://github.com/andland/InsideEdgeFielding&#34; target=&#34;_blank&#34;&gt;Github repository&lt;/a&gt; with the data, R code for the analysis, the results, and code for the Shiny app. Let me know what you think.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Factor Analysis of Baseball&#39;s Hall of Fame Voters</title>
      <link>/2013/01/09/factor-analysis-of-baseballs-hall-of-fame-voters/</link>
      <pubDate>Wed, 09 Jan 2013 00:00:00 +0000</pubDate>
      
      <guid>/2013/01/09/factor-analysis-of-baseballs-hall-of-fame-voters/</guid>
      <description>
&lt;div class=&#39;post&#39;&gt;
&lt;!-- saved from url=(0014)about:internet --&gt;&lt;html&gt;&lt;head&gt;  &lt;title&gt;Factor Analysis of Baseball&#39;s Hall of Fame Voters&lt;/title&gt; &lt;style type=&#34;text/css&#34;&gt;body, td {    font-family: sans-serif;    background-color: white;    font-size: 12px;    margin: 8px; }  tt, code, pre {    font-family: &#39;DejaVu Sans Mono&#39;, &#39;Droid Sans Mono&#39;, &#39;Lucida Console&#39;, Consolas, Monaco, monospace; }  h1 {     font-size:2.2em;  }  h2 {     font-size:1.8em;  }  h3 {     font-size:1.4em;  }  h4 {     font-size:1.0em;  }  h5 {     font-size:0.9em;  }  h6 {     font-size:0.8em;  }  a:visited {    color: rgb(50%, 0%, 50%); }  pre {     margin-top: 0;    max-width: 95%;    border: 1px solid #ccc;    white-space: pre-wrap; }  pre code {    display: block; padding: 0.5em; }  code.r, code.cpp {    background-color: #F8F8F8; }  table, td, th {   border: none; }  blockquote {    color:#666666;    margin:0;    padding-left: 1em;    border-left: 0.5em #EEE solid; }  hr {    height: 0px;    border-bottom: none;    border-top-width: thin;    border-top-style: dotted;    border-top-color: #999999; }  @media print {    * {        background: transparent !important;        color: black !important;        filter:none !important;        -ms-filter: none !important;     }     body {        font-size:12pt;        max-width:100%;     }            a, a:visited {        text-decoration: underline;     }     hr {        visibility: hidden;       page-break-before: always;    }     pre, blockquote {        padding-right: 1em;        page-break-inside: avoid;     }     tr, img {        page-break-inside: avoid;     }     img {        max-width: 100% !important;     }     @page :left {        margin: 15mm 20mm 15mm 10mm;     }          @page :right {        margin: 15mm 10mm 15mm 20mm;     }     p, h2, h3 {        orphans: 3; widows: 3;     }     h2, h3 {        page-break-after: avoid;     } }  &lt;/style&gt; &lt;style type=&#34;text/css&#34;&gt;   pre .operator,    pre .paren {      color: rgb(104, 118, 135)    }     pre .literal {      color: rgb(88, 72, 246)    }     pre .number {      color: rgb(0, 0, 205);    }     pre .comment {      color: rgb(76, 136, 107);    }     pre .keyword {      color: rgb(0, 0, 255);    }     pre .identifier {      color: rgb(0, 0, 0);    }     pre .string {      color: rgb(3, 106, 7);    } &lt;/style&gt; &lt;script type=&#34;text/javascript&#34;&gt;var hljs=new function(){function m(p){return p.replace(/&amp;/gm,&#34;&amp;amp;&#34;).replace(/&lt;/gm,&#34;&amp;lt;&#34;)}function f(r,q,p){return RegExp(q,&#34;m&#34;+(r.cI?&#34;i&#34;:&#34;&#34;)+(p?&#34;g&#34;:&#34;&#34;))}function b(r){for(var p=0;p&lt;r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName==&#34;CODE&#34;){return q}if(!(q.nodeType==3&amp;&amp;q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p=&#34;&#34;;for(var r=0;r&lt;t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,&#34;&#34;)}p+=q}else{if(t.childNodes[r].nodeName==&#34;BR&#34;){p+=&#34;\n&#34;}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,&#34;\n&#34;)}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q&lt;r.length;q++){var p=r[q].replace(/^language-/,&#34;&#34;);if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r&lt;s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName==&#34;BR&#34;){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:&#34;start&#34;,offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:&#34;stop&#34;,offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z=&#34;&#34;;var s=[];function u(){if(y.length&amp;&amp;w.length){if(y[0].offset!=w[0].offset){return(y[0].offset&lt;w[0].offset)?y:w}else{return w[0].event==&#34;start&#34;?y:w}}else{return y.length?y:w}}function t(D){var A=&#34;&lt;&#34;+D.nodeName.toLowerCase();for(var B=0;B&lt;D.attributes.length;B++){var C=D.attributes[B];A+=&#34; &#34;+C.nodeName.toLowerCase();if(C.value!==undefined&amp;&amp;C.value!==false&amp;&amp;C.value!==null){A+=&#39;=&#34;&#39;+m(C.value)+&#39;&#34;&#39;}}return A+&#34;&gt;&#34;}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event==&#34;start&#34;){z+=t(v.node);s.push(v.node)}else{if(v.event==&#34;stop&#34;){var p,r=s.length;do{r--;p=s[r];z+=(&#34;&lt;/&#34;+p.nodeName.toLowerCase()+&#34;&gt;&#34;)}while(p!=v.node);s.splice(r,1);while(r&lt;s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w=&#34;keyword&#34;}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b=&#34;\\b(&#34;+s.join(&#34;|&#34;)+&#34;)\\s&#34;}x.bR=f(y,x.b?x.b:&#34;\\B|\\b&#34;);if(!x.e&amp;&amp;!x.eW){x.e=&#34;\\B|\\b&#34;}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t&lt;x.c.length;t++){if(x.c[t]==&#34;self&#34;){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L&lt;M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&amp;&amp;D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&amp;&amp;L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L&lt;N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join(&#34;|&#34;),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),&#34;&#34;,true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&amp;&amp;M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r=&#34;&#34;;var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+=&#39;&lt;span class=&#34;&#39;+N[0]+&#39;&#34;&gt;&#39;+M[0]+&#34;&lt;/span&gt;&#34;}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&amp;&amp;e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?&#39;&lt;span class=&#34;&#39;+M.cN+&#39;&#34;&gt;&#39;:&#34;&#34;;if(M.rB){y+=L;M.buffer=&#34;&#34;}else{if(M.eB){y+=m(r)+L;M.buffer=&#34;&#34;}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?&#34;&lt;/span&gt;&#34;:&#34;&#34;;if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L&gt;1){O=D[D.length-2].cN?&#34;&lt;/span&gt;&#34;:&#34;&#34;;y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer=&#34;&#34;;if(r.starts){I(r.starts,&#34;&#34;)}return R.rE}if(w(M,R)){throw&#34;Illegal&#34;}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y=&#34;&#34;;try{var s,u=0;E.dM.buffer=&#34;&#34;;do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length&gt;1){throw&#34;Illegal&#34;}return{r:A,keyword_count:x,value:y}}catch(H){if(H==&#34;Illegal&#34;){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r&gt;r.keyword_count+r.r){r=s}if(s.keyword_count+s.r&gt;p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((&lt;[^&gt;]+&gt;|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,&#34;&lt;br&gt;&#34;)}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement(&#34;pre&#34;);s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match(&#34;(\\s|^)(language-)?&#34;+v+&#34;(\\s|$)&#34;)){u=u?(u+&#34; &#34;+v):v}if(/MSIE [678]/.test(navigator.userAgent)&amp;&amp;t.tagName==&#34;CODE&#34;&amp;&amp;t.parentNode.tagName==&#34;PRE&#34;){s=t.parentNode;var p=document.createElement(&#34;div&#34;);p.innerHTML=&#34;&lt;pre&gt;&lt;code&gt;&#34;+y.value+&#34;&lt;/code&gt;&lt;/pre&gt;&#34;;t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName(&#34;pre&#34;);for(var p=0;p&lt;r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener(&#34;DOMContentLoaded&#34;,o,false);window.addEventListener(&#34;load&#34;,o,false)}else{if(window.attachEvent){window.attachEvent(&#34;onload&#34;,o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR=&#34;[a-zA-Z][a-zA-Z0-9_]*&#34;;this.UIR=&#34;[a-zA-Z_][a-zA-Z0-9_]*&#34;;this.NR=&#34;\\b\\d+(\\.\\d+)?&#34;;this.CNR=&#34;\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)&#34;;this.BNR=&#34;\\b(0b[01]+)&#34;;this.RSR=&#34;!|!=|!==|%|%=|&amp;|&amp;&amp;|&amp;=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|&lt;|&lt;&lt;|&lt;&lt;=|&lt;=|=|==|===|&gt;|&gt;=|&gt;&gt;|&gt;&gt;=|&gt;&gt;&gt;|&gt;&gt;&gt;=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~&#34;;this.ER=&#34;(?![\\s\\S])&#34;;this.BE={b:&#34;\\\\.&#34;,r:0};this.ASM={cN:&#34;string&#34;,b:&#34;&#39;&#34;,e:&#34;&#39;&#34;,i:&#34;\\n&#34;,c:[this.BE],r:0};this.QSM={cN:&#34;string&#34;,b:&#39;&#34;&#39;,e:&#39;&#34;&#39;,i:&#34;\\n&#34;,c:[this.BE],r:0};this.CLCM={cN:&#34;comment&#34;,b:&#34;//&#34;,e:&#34;$&#34;};this.CBLCLM={cN:&#34;comment&#34;,b:&#34;/\\*&#34;,e:&#34;\\*/&#34;};this.HCM={cN:&#34;comment&#34;,b:&#34;#&#34;,e:&#34;$&#34;};this.NM={cN:&#34;number&#34;,b:this.NR,r:0};this.CNM={cN:&#34;number&#34;,b:this.CNR,r:0};this.BNM={cN:&#34;number&#34;,b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{&#34;false&#34;:1,&#34;int&#34;:1,&#34;float&#34;:1,&#34;while&#34;:1,&#34;private&#34;:1,&#34;char&#34;:1,&#34;catch&#34;:1,&#34;export&#34;:1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,&#34;const&#34;:1,struct:1,&#34;for&#34;:1,static_cast:2,union:1,namespace:1,unsigned:1,&#34;long&#34;:1,&#34;throw&#34;:1,&#34;volatile&#34;:2,&#34;static&#34;:1,&#34;protected&#34;:1,bool:1,template:1,mutable:1,&#34;if&#34;:1,&#34;public&#34;:1,friend:2,&#34;do&#34;:1,&#34;return&#34;:1,&#34;goto&#34;:1,auto:1,&#34;void&#34;:2,&#34;enum&#34;:1,&#34;else&#34;:1,&#34;break&#34;:1,&#34;new&#34;:1,extern:1,using:1,&#34;true&#34;:1,&#34;class&#34;:1,asm:1,&#34;case&#34;:1,typeid:1,&#34;short&#34;:1,reinterpret_cast:2,&#34;default&#34;:1,&#34;double&#34;:1,register:1,explicit:1,signed:1,typename:1,&#34;try&#34;:1,&#34;this&#34;:1,&#34;switch&#34;:1,&#34;continue&#34;:1,wchar_t:1,inline:1,&#34;delete&#34;:1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:&#34;&lt;/&#34;,c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:&#34;string&#34;,b:&#34;&#39;\\\\?.&#34;,e:&#34;&#39;&#34;,i:&#34;.&#34;},{cN:&#34;number&#34;,b:&#34;\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)&#34;},hljs.CNM,{cN:&#34;preprocessor&#34;,b:&#34;#&#34;,e:&#34;$&#34;},{cN:&#34;stl_container&#34;,b:&#34;\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*&lt;&#34;,e:&#34;&gt;&#34;,k:a,r:10,c:[&#34;self&#34;]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:&#34;number&#34;,b:&#34;\\b0[xX][0-9a-fA-F]+[Li]?\\b&#34;,e:hljs.IMMEDIATE_RE,r:0},{cN:&#34;number&#34;,b:&#34;\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b&#34;,e:hljs.IMMEDIATE_RE,r:0},{cN:&#34;number&#34;,b:&#34;\\b\\d+\\.(?!\\d)(?:i\\b)?&#34;,e:hljs.IMMEDIATE_RE,r:1},{cN:&#34;number&#34;,b:&#34;\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b&#34;,e:hljs.IMMEDIATE_RE,r:0},{cN:&#34;number&#34;,b:&#34;\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b&#34;,e:hljs.IMMEDIATE_RE,r:1},{cN:&#34;keyword&#34;,b:&#34;(?:tryCatch|library|setGeneric|setGroupGeneric)\\b&#34;,e:hljs.IMMEDIATE_RE,r:10},{cN:&#34;keyword&#34;,b:&#34;\\.\\.\\.&#34;,e:hljs.IMMEDIATE_RE,r:10},{cN:&#34;keyword&#34;,b:&#34;\\.\\.\\d+(?![\\w.])&#34;,e:hljs.IMMEDIATE_RE,r:10},{cN:&#34;keyword&#34;,b:&#34;\\b(?:function)&#34;,e:hljs.IMMEDIATE_RE,r:2},{cN:&#34;keyword&#34;,b:&#34;(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b&#34;,e:hljs.IMMEDIATE_RE,r:1},{cN:&#34;literal&#34;,b:&#34;(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b&#34;,e:hljs.IMMEDIATE_RE,r:10},{cN:&#34;literal&#34;,b:&#34;(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b&#34;,e:hljs.IMMEDIATE_RE,r:1},{cN:&#34;identifier&#34;,b:&#34;[a-zA-Z.][a-zA-Z0-9._]*\\b&#34;,e:hljs.IMMEDIATE_RE,r:0},{cN:&#34;operator&#34;,b:&#34;&lt;\\-(?!\\s*\\d)&#34;,e:hljs.IMMEDIATE_RE,r:2},{cN:&#34;operator&#34;,b:&#34;\\-&gt;|&lt;\\-&#34;,e:hljs.IMMEDIATE_RE,r:1},{cN:&#34;operator&#34;,b:&#34;%%|~&#34;,e:hljs.IMMEDIATE_RE},{cN:&#34;operator&#34;,b:&#34;&gt;=|&lt;=|==|!=|\\|\\||&amp;&amp;|=|\\+|\\-|\\*|/|\\^|&gt;|&lt;|!|&amp;|\\||\\$|:&#34;,e:hljs.IMMEDIATE_RE,r:0},{cN:&#34;operator&#34;,b:&#34;%&#34;,e:&#34;%&#34;,i:&#34;\\n&#34;,r:1},{cN:&#34;identifier&#34;,b:&#34;`&#34;,e:&#34;`&#34;,r:0},{cN:&#34;string&#34;,b:&#39;&#34;&#39;,e:&#39;&#34;&#39;,c:[hljs.BE],r:0},{cN:&#34;string&#34;,b:&#34;&#39;&#34;,e:&#34;&#39;&#34;,c:[hljs.BE],r:0},{cN:&#34;paren&#34;,b:&#34;[[({\\])}]&#34;,e:hljs.IMMEDIATE_RE,r:0}]}}; hljs.initHighlightingOnLoad(); &lt;/script&gt;        &lt;br /&gt;Recently, Nate Silver wrote &lt;a href=&#34;http://fivethirtyeight.blogs.nytimes.com/2013/01/08/suspicion-of-steroid-use-could-keep-bagwell-and-piazza-out-of-hall/&#34;&gt;a post&lt;/a&gt; which analyzed how voters who voted for and against Barry Bonds for Baseball&#39;s Hall of Fame differed. Not surprisingly, those who voted for Bonds were more likely to vote for other suspected steroids users (like Roger Clemens). This got me thinking that this would make an interesting case study for factor analysis to see if there are latent factors that drive hall of fame voting.&lt;br /&gt;&lt;br /&gt;The Twitter user @leokitty has kept track of all the known ballots of the voters in a &lt;a href=&#34;https://docs.google.com/spreadsheet/ccc?key=0Aqc4QTMoPrdtdDQxaDYzd1lLOGpOdUdrcnNNNWNXa2c&amp;amp;authkey=CPyuwqIJ&amp;amp;authkey=CPyuwqIJ#gid=6&#34;&gt;spreadsheet&lt;/a&gt;. The spreadsheet is a matrix that has one row for each voter and one column for each player being voted upon. (Players need 75% of the vote to make it to the hall of fame.) I removed all players that had no votes and all voters that had given a partial ballot.&lt;br /&gt;&lt;br /&gt;(This matrix either has a 1 or a 0 in each entry, corresponding to whether a voter voted for the player or not. Note that this kind of matrix is similar to the data that is analyzed in information retrieval. I will be decomposing the (centered) matrix using singular value decomposition to run the factor analysis. This is the same technique used for latent semantic indexing in information retrieval.)&lt;br /&gt;&lt;br /&gt;Starting with the analysis, there is a drop off of the variance  after the first 2 factors, which means it might make sense to look only at the first 2 (which is good because I was only planning on doing so).&lt;br /&gt;&lt;br /&gt;&lt;pre&gt;&lt;code class=&#34;r&#34;&gt;votes = read.csv(&#34;HOF votes.csv&#34;, row.names = 1, header = TRUE)&lt;br /&gt;pca = princomp(votes)&lt;br /&gt;screeplot(pca, type = &#34;l&#34;, main = &#34;Scree Plot&#34;)&lt;br /&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both; text-align: center;&#34;&gt;&lt;a href=&#34;http://4.bp.blogspot.com/-hLkeU-zL-Ak/UO2Yd0B5z4I/AAAAAAAAHo4/dH27nksEiHM/s1600/unnamed-chunk-2.png&#34; imageanchor=&#34;1&#34; style=&#34;margin-left: 1em; margin-right: 1em;&#34;&gt;&lt;img border=&#34;0&#34; src=&#34;http://4.bp.blogspot.com/-hLkeU-zL-Ak/UO2Yd0B5z4I/AAAAAAAAHo4/dH27nksEiHM/s1600/unnamed-chunk-2.png&#34; /&gt;&lt;/a&gt;&lt;/div&gt;&lt;br /&gt;Looking at the loadings, it appears that the first principal component corresponds strongly to steroid users, which Bonds and Clemens having large negative values and other suspected steroid users being on the negative end. The players on the positive end have no steroid suspicions.&lt;br /&gt;&lt;br /&gt;&lt;pre&gt;&lt;code class=&#34;r&#34;&gt;dotchart(sort(pca$loadings[, 1]), main = &#34;First Principal Component&#34;)&lt;br /&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both; text-align: center;&#34;&gt;&lt;a href=&#34;http://1.bp.blogspot.com/-K6MEN_9PcHs/UO2Yd69LeeI/AAAAAAAAHok/Lcb2apHZdC0/s1600/unnamed-chunk-3.png&#34; imageanchor=&#34;1&#34; style=&#34;margin-left: 1em; margin-right: 1em;&#34;&gt;&lt;img border=&#34;0&#34; src=&#34;http://1.bp.blogspot.com/-K6MEN_9PcHs/UO2Yd69LeeI/AAAAAAAAHok/Lcb2apHZdC0/s1600/unnamed-chunk-3.png&#34; /&gt;&lt;/a&gt;&lt;/div&gt;The second component isn&#39;t as easy to decipher. The players at the negative end seem to players that are preferred by analytically minded analysts (think Moneyball). Raines, Trammell, and Martinez have more support among this group of voters. Morris, however, has less support among these voters and he isn&#39;t that far separated from them.&lt;br /&gt;&lt;br /&gt;There also may be some secondary steroid association in the component as well separating players who have proof of steroid use versus those which have no proof but “look like” they took steroids. For example, there is no hard evidence that Bagwell or Piazza took steroids, but they were very muscular and hit a lot of home runs, so they are believed to have taken steroids. There is some sort of evidence the top five players of this component did take steroids.&lt;br /&gt;&lt;br /&gt;&lt;pre&gt;&lt;code class=&#34;r&#34;&gt;dotchart(sort(pca$loadings[, 2]), main = &#34;Second Principal Component&#34;)&lt;br /&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both; text-align: center;&#34;&gt;&lt;a href=&#34;http://4.bp.blogspot.com/-mKFEcj6ISQU/UO2Yd7ZFDQI/AAAAAAAAHoo/ZBwJgKbcLI4/s1600/unnamed-chunk-4.png&#34; imageanchor=&#34;1&#34; style=&#34;margin-left: 1em; margin-right: 1em;&#34;&gt;&lt;img border=&#34;0&#34; src=&#34;http://4.bp.blogspot.com/-mKFEcj6ISQU/UO2Yd7ZFDQI/AAAAAAAAHoo/ZBwJgKbcLI4/s1600/unnamed-chunk-4.png&#34; /&gt;&lt;/a&gt;&lt;/div&gt;&lt;br /&gt;Projecting the votes onto two dimensions, we can look at how the voters for Bonds and Clemens split up. You can see there is a strong horizontal split between the voters for and against Bonds/Clemens. There are also 3 voters that voted for Bonds, but not Clemens.&lt;br /&gt;&lt;br /&gt;&lt;pre&gt;&lt;code class=&#34;r&#34;&gt;ggplot(data.frame(cbind(pca$scores[, 1:2], votes))) + geom_point(aes(Comp.1, &lt;br /&gt;    Comp.2, colour = as.factor(Barry.Bonds), shape = as.factor(Roger.Clemens)), &lt;br /&gt;    size = 4) + coord_equal() + labs(colour = &#34;Bonds&#34;, shape = &#34;Clemens&#34;)&lt;br /&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both; text-align: center;&#34;&gt;&lt;a href=&#34;http://1.bp.blogspot.com/-nQoFe3Gnk4c/UO2YeZBYwkI/AAAAAAAAHos/KftZv63_S6E/s1600/unnamed-chunk-5.png&#34; imageanchor=&#34;1&#34; style=&#34;margin-left: 1em; margin-right: 1em;&#34;&gt;&lt;img border=&#34;0&#34; src=&#34;http://1.bp.blogspot.com/-nQoFe3Gnk4c/UO2YeZBYwkI/AAAAAAAAHos/KftZv63_S6E/s1600/unnamed-chunk-5.png&#34; /&gt;&lt;/a&gt;&lt;/div&gt;&lt;br /&gt;Similarly, I can look at how the voters split up on the issue of steroids by looking at both Bonds and Bagwell. The voters in the upper left do not care about steroid use, but believe that Bagwell wasn&#39;t good enough to make it to the hall of fame. The voters in the lower right do care about steroid use, but believe that Bagwell was innocent of any wrongdoing.&lt;br /&gt;&lt;br /&gt;&lt;pre&gt;&lt;code class=&#34;r&#34;&gt;ggplot(data.frame(cbind(pca$scores[, 1:2], votes))) + geom_point(aes(Comp.1, &lt;br /&gt;    Comp.2, colour = as.factor(paste(Roger.Clemens, &#34;/&#34;, Jeff.Bagwell))), size = 4) + &lt;br /&gt;    geom_hline(aes(0), size = 0.2) + geom_vline(aes(0), size = 0.2) + coord_equal() + &lt;br /&gt;    labs(colour = &#34;Bonds / Bagwell&#34;)&lt;br /&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both; text-align: center;&#34;&gt;&lt;a href=&#34;http://4.bp.blogspot.com/-k4AoH_kJlyc/UO2YfOqnS0I/AAAAAAAAHow/mETFQ33dXVI/s1600/unnamed-chunk-6.png&#34; imageanchor=&#34;1&#34; style=&#34;margin-left: 1em; margin-right: 1em;&#34;&gt;&lt;img border=&#34;0&#34; src=&#34;http://4.bp.blogspot.com/-k4AoH_kJlyc/UO2YfOqnS0I/AAAAAAAAHow/mETFQ33dXVI/s1600/unnamed-chunk-6.png&#34; /&gt;&lt;/a&gt;&lt;/div&gt;&lt;br /&gt;We can also look at a similar plot with Schilling instead of Bagwell. The separation here appears to be stronger.&lt;br /&gt;&lt;br /&gt;&lt;pre&gt;&lt;code class=&#34;r&#34;&gt;ggplot(data.frame(cbind(pca$scores[, 1:2], votes))) + geom_point(aes(Comp.1, &lt;br /&gt;    Comp.2, colour = as.factor(paste(Barry.Bonds, &#34;/&#34;, Curt.Schilling))), size = 4) + &lt;br /&gt;    geom_hline(aes(0), size = 0.2) + geom_vline(aes(0), size = 0.2) + coord_equal() + &lt;br /&gt;    labs(colour = &#34;Bonds / Schilling&#34;)&lt;br /&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both; text-align: center;&#34;&gt;&lt;a href=&#34;http://1.bp.blogspot.com/-aSA3fUNxSGY/UO2YftHu8HI/AAAAAAAAHo0/e2Itd9TkE60/s1600/unnamed-chunk-7.png&#34; imageanchor=&#34;1&#34; style=&#34;margin-left: 1em; margin-right: 1em;&#34;&gt;&lt;img border=&#34;0&#34; src=&#34;http://1.bp.blogspot.com/-aSA3fUNxSGY/UO2YftHu8HI/AAAAAAAAHo0/e2Itd9TkE60/s1600/unnamed-chunk-7.png&#34; /&gt;&lt;/a&gt;&lt;/div&gt;&lt;br /&gt;Finally, we can look at a biplot (using code from &lt;a href=&#34;http://stackoverflow.com/questions/6578355/plotting-pca-biplot-with-ggplot2&#34;&gt;here&lt;/a&gt;).&lt;br /&gt;&lt;br /&gt;&lt;pre&gt;&lt;code class=&#34;r&#34;&gt;PCbiplot &amp;lt;- function(PC = fit, x = &#34;PC1&#34;, y = &#34;PC2&#34;) {&lt;br /&gt;    # PC being a prcomp object&lt;br /&gt;    library(grid)&lt;br /&gt;    data &amp;lt;- data.frame(obsnames = row.names(PC$x), PC$x)&lt;br /&gt;    plot &amp;lt;- ggplot(data, aes_string(x = x, y = y)) + geom_text(alpha = 0.4, &lt;br /&gt;        size = 3, aes(label = obsnames))&lt;br /&gt;    plot &amp;lt;- plot + geom_hline(aes(0), size = 0.2) + geom_vline(aes(0), size = 0.2)&lt;br /&gt;    datapc &amp;lt;- data.frame(varnames = rownames(PC$rotation), PC$rotation)&lt;br /&gt;    mult &amp;lt;- min((max(data[, y]) - min(data[, y])/(max(datapc[, y]) - min(datapc[, &lt;br /&gt;        y]))), (max(data[, x]) - min(data[, x])/(max(datapc[, x]) - min(datapc[, &lt;br /&gt;        x]))))&lt;br /&gt;    datapc &amp;lt;- transform(datapc, v1 = 0.7 * mult * (get(x)), v2 = 0.7 * mult * &lt;br /&gt;        (get(y)))&lt;br /&gt;    plot &amp;lt;- plot + coord_equal() + geom_text(data = datapc, aes(x = v1, y = v2, &lt;br /&gt;        label = varnames), size = 5, vjust = 1, color = &#34;red&#34;)&lt;br /&gt;    plot &amp;lt;- plot + geom_segment(data = datapc, aes(x = 0, y = 0, xend = v1, &lt;br /&gt;        yend = v2), arrow = arrow(length = unit(0.2, &#34;cm&#34;)), alpha = 0.75, color = &#34;red&#34;)&lt;br /&gt;    plot&lt;br /&gt;}&lt;br /&gt;&lt;br /&gt;fit &amp;lt;- prcomp(votes, scale = F)&lt;br /&gt;PCbiplot(fit)&lt;br /&gt;&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both; text-align: center;&#34;&gt;&lt;a href=&#34;http://4.bp.blogspot.com/-MPuCAW6v_zw/UO2YgMRas1I/AAAAAAAAHpA/pHzLYPdb0k4/s1600/unnamed-chunk-8.png&#34; imageanchor=&#34;1&#34; style=&#34;margin-left: 1em; margin-right: 1em;&#34;&gt;&lt;img border=&#34;0&#34; src=&#34;http://4.bp.blogspot.com/-MPuCAW6v_zw/UO2YgMRas1I/AAAAAAAAHpA/pHzLYPdb0k4/s1600/unnamed-chunk-8.png&#34; /&gt;&lt;/a&gt;&lt;/div&gt;I could have also attempted to rotate the factors to make them more interpretable, but they appeared to have easy interpretation as is. Since we were looking at 2-d plots, rotation would not have made a difference in interpreting the plots. It is also common to use a likelihood approach to estimate factors. I chose to use the principal component method because the data are definitely not normal (being 0&#39;s and 1&#39;s).&lt;/head&gt;&lt;/html&gt;&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>A Matrix Factorization Model for Hitter/Pitcher Matchups</title>
      <link>/2012/08/10/a-matrix-factorization-model-for-hitter/pitcher-matchups/</link>
      <pubDate>Fri, 10 Aug 2012 00:00:00 +0000</pubDate>
      
      <guid>/2012/08/10/a-matrix-factorization-model-for-hitter/pitcher-matchups/</guid>
      <description>
&lt;div class=&#39;post&#39;&gt;
&lt;h3&gt;Introduction &lt;/h3&gt;Matrix factorization has been proven to be one of the best ways to do collaborative filtering. The most common example of collaborative filtering is to predict how much a viewer will like a movie. The power of matrix factorization was a key development of the Netflix Prize (see &lt;a href=&#34;http://www2.research.att.com/%7Evolinsky/papers/ieeecomputer.pdf&#34;&gt;http://www2.research.att.com/~volinsky/papers/ieeecomputer.pdf&lt;/a&gt;).&lt;br /&gt;&lt;br /&gt;Using the movie rating example, the idea is that there are some underlying features of the movie and underlying attributes of the user that interact to determine if the user will like the movie. So if the user typically likes comedies, and the movie is a comedy, these will interact and the user will like the movie. The best part is that in order to determine these features, we do not need to use any background information on the movie or the user. For example, we don&#39;t need someone to manually code whether each movie is a comedy or not. Matrix factorization just needs a set of historical ratings, which is usually easily available.&lt;br /&gt;&lt;br /&gt;Using only a few features, we could probably interpret what each of them mean (comedy, drama, foreign, blockbuster, ...). They found in the Netflix competition that increasing the number of underlying features that make up a user and a movie almost always improved accuracy (they used up to 1500 features). With that many features, they can no longer be interpreted as in the example.&lt;br /&gt;&lt;br /&gt;&lt;h3&gt;Baseball Data&lt;/h3&gt;I find this method interesting, and I wanted to apply it to some real data. One idea I had is predicting whether the result of a pitcher-batter match-up in baseball. Usually in baseball, the analysts cry &#34;small sample size&#34; if someone reports that a pitcher is particularly good/bad versus a batter. In order to get an accurate assessment that does not suffer from random variation, we need 100 or more at bats, which usually takes a few years at least.&lt;br /&gt;&lt;br /&gt;It seems that matrix factorization might be a natural fit, because we are not predicting the specific interaction of the batter/pitcher. Instead, we are estimating some underlying features of the batter and the pitcher. We can estimate these features from all of the match-ups that the batter and pitcher have been in -- not just the ones against each other.&lt;br /&gt;&lt;br /&gt;One example of a feature that I hoped to extract is batter and pitcher handedness. It is well known that batters fair poorly against pitchers of the same handedness and do better against pitchers of the opposite handedness. Other examples might relate to whether the pitcher can throw fast and how well the batter does against fast pitches; similarly with breaking balls, etc.&lt;br /&gt;&lt;br /&gt;In the Netflix competition, each user rates movies on a 1 to 5 star scale, and rates the movie only once. The outcome of a match-up is different as there is no obvious &#34;rating&#34; of the outcome. I used improvement in expected number of runs scored of the outcome of a plate appearance as the &#34;rating&#34; to be predicted (from &lt;a href=&#34;http://www.tangotiger.net/RE9902event.html&#34;&gt;here&lt;/a&gt;). So a single is worth 0.474 runs and an out is worth -0.299 runs. Also, in baseball, there will be many match-ups between the batter and pitcher. I could have averaged the outcomes, but I left the multiple records in the data as is.&lt;br /&gt;&lt;br /&gt;I used 2010 data and removed all pitchers that were hitting and batters that were pitching. According to my data, there were 65,128 unique batter-pitcher match-ups (with about 173,000 plate appearances). I used 5,000 match-ups as validation, 5,000 as testing, and the remaining as training.&lt;br /&gt;&lt;br /&gt;&lt;h3&gt;Model Fitting&lt;/h3&gt;The first model I used as a baseline just included &#34;biases&#34; for the batter and pitcher, as well as an overall league average bias. In the baseline, there are no factors or interactions. So the result of the match-up between a batter i and pitcher j would be estimated as the overall average bias plus the batter i bias plus the pitcher j bias. In math terms:&lt;br /&gt;&lt;br /&gt;&lt;a href=&#34;http://www.codecogs.com/eqnedit.php?latex=%5Cdpi%7B120%7D%20%5Cmu@plus;b_i@plus;p_j&#34; target=&#34;_blank&#34;&gt;&lt;img src=&#34;http://latex.codecogs.com/png.latex?%5Cdpi%7B120%7D%20%5Cmu+b_i+p_j&#34; title=&#34;\dpi{120} \mu+b_i+p_j&#34; /&gt;&lt;/a&gt;&lt;br /&gt;&lt;br /&gt;Higher values for the batter bias mean the batter is better better than average and lower values for the pitcher bias means the pitcher is better than average.&lt;br /&gt;&lt;br /&gt;So as to not overfit the data, I used L2 regularization on the batter and pitcher biases. For this and future estimation, I used the validation data to determine the best penalty and I used a gradient descent method to solve for the parameters.&lt;br /&gt;&lt;br /&gt;Adding in the factor interaction, the result of the match-up between a batter i and pitcher j is&lt;br /&gt;&lt;br /&gt;&lt;a href=&#34;http://www.codecogs.com/eqnedit.php?latex=%5Cdpi%7B120%7D%20%5Cmu@plus;b_i@plus;p_j%20@plus;%20%5Cboldsymbol%7Bo%7D_i%5ET%20%5Cboldsymbol%7Bd%7D_j&#34; target=&#34;_blank&#34;&gt;&lt;img src=&#34;http://latex.codecogs.com/png.latex?%5Cdpi%7B120%7D%20%5Cmu+b_i+p_j%20+%20%5Cboldsymbol%7Bo%7D_i%5ET%20%5Cboldsymbol%7Bd%7D_j&#34; title=&#34;\dpi{120} \mu+b_i+p_j + \boldsymbol{o}_i^T \boldsymbol{d}_j&#34; /&gt;&lt;/a&gt;&lt;br /&gt;&lt;br /&gt;where &lt;a href=&#34;http://www.codecogs.com/eqnedit.php?latex=%5Cdpi%7B120%7D%20%5Cboldsymbol%7Bo%7D_i&#34; target=&#34;_blank&#34;&gt;&lt;img src=&#34;http://latex.codecogs.com/png.latex?%5Cdpi%7B120%7D%20%5Cboldsymbol%7Bo%7D_i&#34; title=&#34;\dpi{120} \boldsymbol{o}_i&#34; /&gt;&lt;/a&gt; is a vector of offensive features for batter i and &lt;a href=&#34;http://www.codecogs.com/eqnedit.php?latex=%5Cdpi%7B120%7D%20%5Cboldsymbol%7Bd%7D_j&#34; target=&#34;_blank&#34;&gt;&lt;img src=&#34;http://latex.codecogs.com/png.latex?%5Cdpi%7B120%7D%20%5Cboldsymbol%7Bd%7D_j&#34; title=&#34;\dpi{120} \boldsymbol{d}_j&#34; /&gt;&lt;/a&gt; is a set of defensive features for pitcher j. The two vectors must be of the same length which we can determine. Again, I used L2 regularization on the feature vectors.&lt;br /&gt;&lt;br /&gt;&lt;h3&gt;Results&lt;/h3&gt;I fit the matrix factorization model using 0, 1, 2, 5, and 10 features. The model with 0 features corresponds to the baseline model. As stated above, I was hoping to see that handedness would show up as one of the first features.&lt;br /&gt;&lt;br /&gt;I fit the models with the training set, tuned the regularization parameters with the validation set, and finally I am comparing the models with the test set. Unfortunately, the baseline model performed the best of all and the performance degraded as more features were added. A plot of the test mean squared errors is below. The difference between the models is small, but I believe that is because the regularization parameter is shrinking the factor vectors to 0.&lt;br /&gt;&lt;br /&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both; text-align: center;&#34;&gt;&lt;a href=&#34;http://1.bp.blogspot.com/-8doS-OZmBzs/UCUmUQWdo_I/AAAAAAAAHKA/CmE1rs9YYOc/s1600/MatFactTestMSE.png&#34; imageanchor=&#34;1&#34; style=&#34;margin-left: 1em; margin-right: 1em;&#34;&gt;&lt;img border=&#34;0&#34; src=&#34;http://1.bp.blogspot.com/-8doS-OZmBzs/UCUmUQWdo_I/AAAAAAAAHKA/CmE1rs9YYOc/s1600/MatFactTestMSE.png&#34; /&gt;&lt;/a&gt;&lt;/div&gt;A further baseline model could have been used -- an overall mean with no biases. The MSE for all but the 10-factor  model were better than this average. So the biases help, but unfortunately the factorization did not.&lt;br /&gt;&lt;br /&gt;I compared the factor vectors of the pitchers by their handedness and I found no difference between righties and lefties.&lt;br /&gt;&lt;br /&gt;&lt;h3&gt;Summary&lt;/h3&gt;The outcome of this analysis was not what I hoped for, but I still learned something about matrix factorization and its implementation. I think the moral of the story is that it is hard to predict batter-pitcher match-ups, probably because there is a lot of variation in every at bat. Matrix factorization has been successfully applied in situations where the data is much more sparse than this application, so this difference may be a reason for its failure. I plan to try this again with the &lt;a href=&#34;http://www.libfm.org/&#34;&gt;libFM&lt;/a&gt; software to see if I get the same results.&lt;br /&gt;&lt;br /&gt;&lt;i&gt;&lt;b&gt;Update:&lt;/b&gt;&lt;/i&gt;&lt;br /&gt;I implemented this in libFM and basically got the same results, so I guess I was doing it correctly. If I work on this further, I wonder if adding attributes about the pitcher explicitly would help. I would include an indicator for righty/lefty or maybe home/away.&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Space Time Swing Probability Plot for Ichiro</title>
      <link>/2012/05/30/space-time-swing-probability-plot-for-ichiro/</link>
      <pubDate>Wed, 30 May 2012 00:00:00 +0000</pubDate>
      
      <guid>/2012/05/30/space-time-swing-probability-plot-for-ichiro/</guid>
      <description>
&lt;div class=&#39;post&#39;&gt;
I was having some fun with PITCHf/x data and generalize additive models. &lt;a href=&#34;http://en.wikipedia.org/wiki/PITCHf/x&#34;&gt;PITCHf/x&lt;/a&gt; keeps track of the trajectory, path, location of every pitch in the MLB. It is pretty accurate and opens up baseball to more analyses than ever before. &lt;a href=&#34;http://en.wikipedia.org/wiki/Generalized_additive_model&#34;&gt;Generalized additive models&lt;/a&gt; (GAMs) are statistical models that put minimal assumptions on the type of model you are fitting. Traditional statistical models are linear, in that they assume that the response variable you are modelling is a linear function of the explanatory variables. GAMs just assumes that the relationship is &#34;smooth.&#34; &lt;a href=&#34;http://www.stat.ubc.ca/%7Ematias/rgam/binomial.png&#34;&gt;Here &lt;/a&gt;is a good example of a relationship that may have traditionally been modeled as linear, but it is a much better assumption that the relationship is smooth.&lt;br /&gt;&lt;br /&gt;I fit a GAM to PITCHf/x data. The response is whether or not Ichiro swung. The explanatory variables are pitch location on the x, pitch location on the z, and the day of the year. Obviously, we expect the probability of swinging to change as the pitch is closer or further away from the center of the strike zone. Additionally, I was interested in seeing his swinging propensity changed as the year went on.&lt;br /&gt;&lt;br /&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both; text-align: center;&#34;&gt;&lt;object class=&#34;BLOGGER-youtube-video&#34; classid=&#34;clsid:D27CDB6E-AE6D-11cf-96B8-444553540000&#34; codebase=&#34;http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0&#34; data-thumbnail-src=&#34;http://i.ytimg.com/vi/44X9VXXjYPI/0.jpg&#34; height=&#34;266&#34; width=&#34;320&#34;&gt;&lt;param name=&#34;movie&#34; value=&#34;http://www.youtube.com/v/44X9VXXjYPI?version=3&amp;f=user_uploads&amp;c=google-webdrive-0&amp;app=youtube_gdata&#34; /&gt;  &lt;param name=&#34;bgcolor&#34; value=&#34;#FFFFFF&#34; /&gt;  &lt;embed width=&#34;320&#34; height=&#34;266&#34;  src=&#34;http://www.youtube.com/v/44X9VXXjYPI?version=3&amp;f=user_uploads&amp;c=google-webdrive-0&amp;app=youtube_gdata&#34; type=&#34;application/x-shockwave-flash&#34;&gt;&lt;/embed&gt;&lt;/object&gt;&lt;/div&gt;&lt;br /&gt;You can see that the probability of swinging is smooth in both location and time. Also, you can see (ever so slightly) that the probability of swinging increased as the year went on. Looking at &lt;a href=&#34;http://www.baseball-reference.com/players/split.cgi?id=suzukic01&amp;amp;year=2010&amp;amp;t=b#half&#34;&gt;the splits&lt;/a&gt;, you can see that his walk percentage was 28/395 (7.1%) in the first half and 17/337 (5.0%) in the second half. This is in agreement with the swing probability increasing,&lt;br /&gt;&lt;br /&gt;I used the &lt;a href=&#34;http://people.bath.ac.uk/sw283/mgcv/tampere/mgcv.pdf&#34;&gt;mgcv &lt;/a&gt;package in R to run the GAM. I created an image for every day and stitched them together into a movie with &lt;a href=&#34;http://ffmpeg.org/&#34;&gt;ffmpeg&lt;/a&gt;. The R code is &lt;a href=&#34;https://docs.google.com/open?id=0B21DLJKq18K9ejNUX0RXQnlJam8&#34;&gt;here&lt;/a&gt;.&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Cleveland Indians&#39; Attendance</title>
      <link>/2012/05/20/cleveland-indians-attendance/</link>
      <pubDate>Sun, 20 May 2012 00:00:00 +0000</pubDate>
      
      <guid>/2012/05/20/cleveland-indians-attendance/</guid>
      <description>
&lt;div class=&#39;post&#39;&gt;
Recently, Chris Perez, the closer for the Indians, displayed &lt;a href=&#34;http://throwinheat.mlblogs.com/2012/05/20/chris-perez-expands-on-his-comments-mark-shapiro-responds/&#34;&gt;some frustration &lt;/a&gt;with the fans for not supporting the team. Currently, they have the &lt;a href=&#34;http://www.baseball-reference.com/leagues/current_attendance.shtml&#34;&gt;lowest attendance &lt;/a&gt;in the majors -- by a decent margin. The Indians are averaging about 15,000 fans per home game, while the next closest team, the Oakland A&#39;s, is averaging 19,000. It seemed like an odd time for Perez to bring this up because they &lt;a href=&#34;http://www.baseball-reference.com/teams/CLE/2012-schedule-scores.shtml&#34;&gt;have had &lt;/a&gt;attendance in the 29,000s each of the last two home games. So that intrigued me to look into the numbers of what causes attendance to vary.&lt;br /&gt;&lt;br /&gt;I looked at &lt;a href=&#34;http://www.baseball-reference.com/teams/CLE/2011-schedule-scores.shtml&#34;&gt;2011 attendance data &lt;/a&gt;for the Cleveland Indians only. I had a strong suspicion that a popular opponent would definitely and weekend games cause attendance to increase. Also, there is usually some press at the beginning of the season that claims no one wants to go to the games because it is too cold for baseball. (There is also more competing entertainment at the beginning of the season.)&lt;br /&gt;&lt;br /&gt;What I found to be significant (based on an exploratory approach) are summarized in the graph below. This plot explores the relationship of attendance with 5 other variables. I plotted attendance on the y-axis and the date on the x-axis. I don&#39;t expect date to have any effect, but it organizes other aspects well (and you can see opening day had the highest attendance of the year). Instead of plotting points, I plotted the name of the opponent. You can see there are some larger attendances when they are playing the New York Yankees and the Cincinnati Reds, for example. The color of the team name indicates whether they are playing on the weekend or not and the size indicates the &lt;a href=&#34;http://academic.udayton.edu/kissock/http/Weather/citylistUS.htm&#34;&gt;temperature&lt;/a&gt;. Probably the biggest effect, weekend games outdraw weekday games consistently. The colder temperatures are only in the beginning of the season, and seem to have a noticeable effect (at least for the coldest days).&lt;br /&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both; text-align: center;&#34;&gt;&lt;a href=&#34;http://3.bp.blogspot.com/-c7JBG0k4OBQ/T7kvpyZYOmI/AAAAAAAAG20/tC71mpum_lA/s1600/IndainsAttendance2011.jpeg&#34; imageanchor=&#34;1&#34; style=&#34;margin-left: 1em; margin-right: 1em;&#34;&gt;&lt;img border=&#34;0&#34; height=&#34;633&#34; src=&#34;https://lh3.ggpht.com/-c7JBG0k4OBQ/T7kvpyZYOmI/AAAAAAAAG20/tC71mpum_lA/s640/IndainsAttendance2011.jpeg&#34; width=&#34;640&#34; /&gt;&lt;/a&gt;&lt;/div&gt;&lt;br /&gt;&lt;br /&gt;I also looked into how many games above .500 the team was and how close they were in the division race. Neither of these showed any correlation, at least at the marginal level. This is interesting because the main reason Chris Perez is frustrated is that the team is winning, so the fans should be supporting them. This shows that wining did not make much of a difference within a single year. This should be more prevalent over multiple years.&lt;br /&gt;&lt;br /&gt;Some other information that might be useful is the quality of the opponent or whether the ace of the opposing pitching staff is starting. I only included temperature and not precipitation or any other weather information.&lt;br /&gt;&lt;br /&gt;Here is the basic R code I used: &lt;br /&gt;&lt;pre class=&#34;brush: r&#34;&gt;library(ggplot2)&lt;br /&gt;ggplot(data=home.attend,aes(x=Date,y=Attendance,colour=Weekend,label=Opp,size=Temp))+&lt;br /&gt;  geom_text()+scale_size(to = c(2, 5))+theme_bw()&amp;nbsp;&lt;/pre&gt;&lt;pre class=&#34;brush: r&#34;&gt;&amp;nbsp;&lt;/pre&gt;&lt;i&gt;&lt;b&gt;Update (9/21/2013)&lt;/b&gt;&lt;/i&gt;:&lt;br /&gt;Since attendance is still a hot topic, I created the same plot for the 2013 season so far.&lt;br /&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both; text-align: center;&#34;&gt;&lt;a href=&#34;http://1.bp.blogspot.com/-MiH0WF4KyGU/Uj5E45dKMSI/AAAAAAAAH9A/3MoE4VGYjUA/s1600/IndainsAttendance2013.jpeg&#34; imageanchor=&#34;1&#34; style=&#34;margin-left: 1em; margin-right: 1em;&#34;&gt;&lt;img border=&#34;0&#34; height=&#34;426&#34; src=&#34;https://lh3.ggpht.com/-MiH0WF4KyGU/Uj5E45dKMSI/AAAAAAAAH9A/3MoE4VGYjUA/s1600/IndainsAttendance2013.jpeg&#34; width=&#34;640&#34; /&gt;&lt;/a&gt;&lt;/div&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both; text-align: center;&#34;&gt;&lt;a href=&#34;http://4.bp.blogspot.com/-mT8HBGEKwak/Uj5EauQomGI/AAAAAAAAH84/qB4e0VE6n94/s1600/IndainsAttendance2013.jpeg&#34; imageanchor=&#34;1&#34; style=&#34;margin-left: 1em; margin-right: 1em;&#34;&gt;&lt;br /&gt;&lt;/a&gt;&lt;/div&gt;&lt;br /&gt;&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>What&#39;s Up with Albert Pujols?</title>
      <link>/2012/05/05/whats-up-with-albert-pujols/</link>
      <pubDate>Sat, 05 May 2012 00:00:00 +0000</pubDate>
      
      <guid>/2012/05/05/whats-up-with-albert-pujols/</guid>
      <description>
&lt;div class=&#39;post&#39;&gt;
After signing a huge deal with the Angels, Pujols has been having a really bad year. He hasn&#39;t hit a home run this year, breaking a career long streak. So I thought it would be a good idea to use some statistics to tell how good or bad we think Pujols will actually be this year.&lt;br /&gt;&lt;br /&gt;Coming into the year, he had a career .328/.420/.617 career AVG/OBP/SLG. Through one month, he has a .194/.237/.269. So what do we expect out of Pujols for the rest of the year?&lt;br /&gt;&lt;br /&gt;In Bayesian statistical terms, we can quantify our prior beliefs about Pujols from his history before this year. Below are histograms and fitted distributions of Pujols&#39; yearly batting lines from 2001 to 2011. His numbers are well above normal and he has been the best player in baseball for a while.&lt;br /&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both; text-align: center;&#34;&gt;&lt;a href=&#34;http://1.bp.blogspot.com/-eBkY_jm8kn0/T6WDvtfUlZI/AAAAAAAAGss/dNE4TkjFC6I/s1600/pujols.bmp&#34; imageanchor=&#34;1&#34; style=&#34;margin-left: 1em; margin-right: 1em;&#34;&gt;&lt;img border=&#34;0&#34; src=&#34;http://1.bp.blogspot.com/-eBkY_jm8kn0/T6WDvtfUlZI/AAAAAAAAGss/dNE4TkjFC6I/s1600/pujols.bmp&#34; /&gt;&lt;/a&gt;&lt;/div&gt;So coming into this year, we would expect him to have a batting average between .290 and .370, with .330 being the most likely, for example.&lt;br /&gt;&lt;br /&gt;Combining our prior expectations with the data we have observed from this year, we can get our posterior beliefs. When we do that, we get a posterior expectation that Pujols is a true .312/.379/.451 hitter. The league averages from 2001 to 2011 are .263/.331/.418, so he is still expected to be well above the average player, even with the poor start. If we use data from just this year, we do not have enough data to give us an accurate reflection of how good he is. If we combine the data with our prior beliefs, we get a better indication of what to expect. Below is a table that compares these numbers.&lt;br /&gt;&lt;br /&gt;&lt;style type=&#34;text/css&#34;&gt;.nobrtable br { display: none } &lt;/style&gt;&lt;br /&gt;&lt;div class=&#34;nobrtable&#34;&gt;&lt;table border=&#34;2&#34; bordercolor=&#34;#3366cc&#34; cellpadding=&#34;3&#34; cellspacing=&#34;3&#34; style=&#34;background-color: white;&#34;&gt;&lt;tbody&gt;&lt;tr style=&#34;background-color: #3366cc; color: white; padding-bottom: 4px; padding-top: 5px;&#34;&gt; &lt;th&gt;&lt;br /&gt;&lt;/th&gt;&lt;th&gt;AVG&lt;/th&gt;&lt;th&gt;OBP&lt;/th&gt;&lt;th&gt;SLG&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;League&lt;/td&gt;&lt;td&gt;.263&lt;/td&gt;&lt;td&gt;.331&lt;/td&gt;&lt;td&gt;.418&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Prior&lt;/td&gt;&lt;td&gt;.328&lt;/td&gt;&lt;td&gt;.420&lt;/td&gt;&lt;td&gt;.617&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;This Year&lt;/td&gt;&lt;td&gt;.194&lt;/td&gt;&lt;td&gt;.237&lt;/td&gt;&lt;td&gt;.269&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Posterior&lt;/td&gt;&lt;td&gt;.312&lt;/td&gt;&lt;td&gt;.379&lt;/td&gt;&lt;td&gt;.451&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;br /&gt;Finally, we can also get the whole posterior distribution (not just the expectation). I have plotted the prior and posterior distributions on the same graph. You can see that Pujols&#39; bad month has caused our beliefs about him to decrease quite a bit. Most notable is the slugging percentage, which is likely because of his career-long homerless streak.&lt;br /&gt;&lt;br /&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both; text-align: center;&#34;&gt;&lt;a href=&#34;http://1.bp.blogspot.com/-ZmO18a8vj0w/T6WLW6LnjsI/AAAAAAAAGs4/ll2ab7sGJAg/s1600/pujols-prior+and+posterior.bmp&#34; imageanchor=&#34;1&#34; style=&#34;margin-left: 1em; margin-right: 1em;&#34;&gt;&lt;img border=&#34;0&#34; src=&#34;http://1.bp.blogspot.com/-ZmO18a8vj0w/T6WLW6LnjsI/AAAAAAAAGs4/ll2ab7sGJAg/s1600/pujols-prior+and+posterior.bmp&#34; /&gt;&lt;/a&gt;&lt;/div&gt;&lt;br /&gt;What Bayesian analysis does is shrinks (or regresses) the data from this year to the prior average. This is&amp;nbsp; the same idea of regressing to the overall mean that is talked about frequently in sabermetric blogs. The difference is that regressing to the mean usually regresses to the average player in the league. With Bayesian analysis, we can regress to our prior expectation about the specific player (Albert Pujols). I believe this approach will give us better results in most cases.&lt;br /&gt;&lt;br /&gt;The R code to do the analysis can be found &lt;a href=&#34;https://docs.google.com/open?id=0B21DLJKq18K9NkNJb0lQRHNqbHM&#34;&gt;here&lt;/a&gt;. I used data from &lt;a href=&#34;http://www.baseball-reference.com/players/p/pujolal01.shtml&#34;&gt;Baseball Reference&lt;/a&gt;.&lt;/div&gt;
&lt;h2&gt;Comments&lt;/h2&gt;
&lt;div class=&#39;comments&#39;&gt;
&lt;div class=&#39;comment&#39;&gt;
&lt;div class=&#39;author&#39;&gt;Andrew Landgraf&lt;/div&gt;
&lt;div class=&#39;content&#39;&gt;
Just a follow up: From May 6 to the end of the season he had a .305/.365/.569 split. The posterior expectation of .312/.379/.451 matches the average and on base percentage well, but his actual slugging is quite a bit higher than the posterior distribution would have predicted.&lt;br /&gt;&lt;br /&gt;Not sure what to make of this except to say he had a really bad start with slugging, which may have been caused more by random chance than the other two. And obviously the distributional assumptions are an approximation to reality.&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Empirical Bayes Estimation of On Base Percentage</title>
      <link>/2010/12/31/empirical-bayes-estimation-of-on-base-percentage/</link>
      <pubDate>Fri, 31 Dec 2010 00:00:00 +0000</pubDate>
      
      <guid>/2010/12/31/empirical-bayes-estimation-of-on-base-percentage/</guid>
      <description>
&lt;div class=&#39;post&#39;&gt;
I guess you could call this On Bayes Percentage. *cough*&lt;br /&gt;&lt;br /&gt;Fresh off learning Bayesian techniques in one of my classes last quarter, I thought it would be fun to try to apply the method. I was able to find some examples of &lt;a href=&#34;http://en.wikipedia.org/wiki/Hierarchical_Bayes_model&#34;&gt;Hierarchical Bayes &lt;/a&gt;being used to analyze baseball data at &lt;a href=&#34;http://www-stat.wharton.upenn.edu/%7Estjensen/&#34;&gt;Wharton&lt;/a&gt;. &lt;br /&gt;&lt;br /&gt;&lt;b&gt;Setting up the problem&lt;/b&gt;&lt;br /&gt;On base percentage (OBP) is probably the most important basic offensive statistic in baseball. Getting a reliable estimate of a players true ability to get on base is therefore important. The basic problem is that the sample size we get from one season rarely has enough observations so that we are certain of a player&#39;s ability. Even though there are 162 games in a season, there is a possibility that the actual OBP is the result of luck rather than skill. Bayesian analysis will &#34;regress&#34; the actual observed OBP to the mean, in that if a player has a small number of plate appearances (PA) it doesn&#39;t give them very much weight and the result will be something closer to the overall (MLB) average. On the other hand, if a player has quite a few PAs then it believes that the results are not the result of luck and it gives the observations a lot of weight.&lt;br /&gt;We are trying to estimate the &#34;true&#34; OBP of each batter. Bayesian analysis assumes that the true OBP is random. &lt;a href=&#34;http://en.wikipedia.org/wiki/Empirical_Bayes_method&#34;&gt;Empirical Bayes&lt;/a&gt; is a method of figuring out the distribution of &#34;true&#34; OBP using the data. OBP is times on base divided by PA. Times on base (X) for each batter is distributed &lt;a href=&#34;http://en.wikipedia.org/wiki/Binomial_distribution&#34;&gt;binomial&lt;/a&gt; with n=PA and p=true OBP. We further assume that p is distributed &lt;a href=&#34;http://en.wikipedia.org/wiki/Beta_distribution&#34;&gt;Beta&lt;/a&gt; with parameters a and b. It follows from this that the marginal distribution of X is distributed according to the distribution:&lt;br /&gt;gamma(a+b)*gamma(a+x)*gamma(n-x+b)*(n choose x)/(gamma(a)*gamma(b)*gamma(a+b+n))&lt;br /&gt;where gamma is the &lt;a href=&#34;http://en.wikipedia.org/wiki/Gamma_function&#34;&gt;gamma function&lt;/a&gt;.&lt;br /&gt;We will estimate the parameters a and b based on the data (X), using its marginal distribution (the &#34;empirical&#34; part of Bayes). To do this I found that likelihood of the marginal distribution of all the batters. Then I maximized this likelihood by adjusting the parameters a and b. This is called the ML-II.&lt;br /&gt;&lt;br /&gt;&lt;b&gt;The Analysis&lt;/b&gt;&lt;br /&gt;I used data for all non-pitchers in 2010. I assume that each player is independent. In doing that, I just have to multiply all the marginals for each player together to get the likelihood. When I do this and maximize it with respect to a and b, I get estimates that a = 83.48291 and b = 174.9038. I think this can be interpreted that prior mean (what we would assume that average OBP of a batter is before seeing him bat) is a/(a+b) = 0.323. This is pretty close to what the overall OBP of the league was (0.330). I think it makes sense that the prior is lower than the league average because batters who do well will get more opportunities and players that do poorly will get fewer. So the league average is biased high. &lt;br /&gt;Below is a graph of the prior distribution and the updated posteriors of every batter. You can (sort of) see that the posteriors have tighter distributions than the prior does. (The posterior distribution of each batter in this case is the distribution of OBP after we have observed PA and the actual OBP.)&lt;br /&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both; text-align: center;&#34;&gt;&lt;a href=&#34;http://4.bp.blogspot.com/_qD9db1gpElc/TR1lbFd8yfI/AAAAAAAAFhQ/IkoRr-9FrZw/s1600/dist.jpg&#34; imageanchor=&#34;1&#34; style=&#34;clear: left; float: left; margin-bottom: 1em; margin-right: 1em;&#34;&gt;&lt;img border=&#34;0&#34; src=&#34;http://4.bp.blogspot.com/_qD9db1gpElc/TR1lbFd8yfI/AAAAAAAAFhQ/IkoRr-9FrZw/s1600/dist.jpg&#34; /&gt;&lt;/a&gt;&lt;/div&gt;&lt;br /&gt;&lt;br /&gt;One way to see why this Bayesian analysis is useful is to compare the posterior means with the observed OBP. If someone has only a few PAs, their OBP could be very high or very low and this may mislead you into thinking that this batter is very good or bad. However, the posterior mean takes into account the number of PAs. Below is a graph comparing the two. You can see that the range of values for posterior mean is pretty small, especially compare to actual OBP.&lt;br /&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both; text-align: center;&#34;&gt;&lt;a href=&#34;http://4.bp.blogspot.com/_qD9db1gpElc/TR1mzX6IK2I/AAAAAAAAFhU/hlrgx0oDK38/s1600/OBPvsPostMean.jpg&#34; imageanchor=&#34;1&#34; style=&#34;clear: left; float: left; margin-bottom: 1em; margin-right: 1em;&#34;&gt;&lt;img border=&#34;0&#34; src=&#34;http://4.bp.blogspot.com/_qD9db1gpElc/TR1mzX6IK2I/AAAAAAAAFhU/hlrgx0oDK38/s1600/OBPvsPostMean.jpg&#34; /&gt;&lt;/a&gt;&lt;/div&gt;&lt;br /&gt;Here is a list of the highest posterior mean OBP:&lt;br /&gt;&lt;br /&gt;&lt;table border=&#34;0&#34; cellpadding=&#34;0&#34; cellspacing=&#34;0&#34; style=&#34;width: 252px;&#34;&gt;&lt;colgroup&gt;&lt;col style=&#34;width: 87pt;&#34; width=&#34;116&#34;&gt;&lt;/col&gt;  &lt;col style=&#34;width: 54pt;&#34; width=&#34;72&#34;&gt;&lt;/col&gt;  &lt;col style=&#34;width: 48pt;&#34; width=&#34;64&#34;&gt;&lt;/col&gt;  &lt;/colgroup&gt;&lt;tbody&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl65&#34; height=&#34;20&#34; style=&#34;height: 15pt; width: 87pt;&#34; width=&#34;116&#34;&gt;&lt;b&gt;Batter&lt;/b&gt;&lt;/td&gt;   &lt;td class=&#34;xl65&#34; style=&#34;border-left: medium none; width: 54pt;&#34; width=&#34;72&#34;&gt;&lt;b&gt;Posterior Mean&lt;/b&gt;&lt;/td&gt;   &lt;td class=&#34;xl65&#34; style=&#34;border-left: medium none; width: 48pt;&#34; width=&#34;64&#34;&gt;&lt;b&gt;Actual OBP&lt;/b&gt;&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl65&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Joey Votto&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.396&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.424&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl65&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Miguel Cabrera&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.392&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.420&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl65&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Albert Pujols&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.390&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.414&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl65&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Justin Morneau&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.388&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.437&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl65&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Josh Hamilton&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.383&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.411&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl65&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Prince Fielder&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.380&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.401&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl65&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Shin-Soo Choo&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.379&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.401&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl65&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Kevin Youkilis&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.379&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.412&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl65&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Joe Mauer&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.378&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.402&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl65&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Adrian   Gonzalez&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.374&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.393&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl65&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Daric Barton&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.374&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.393&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl65&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Jim Thome&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.373&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.412&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl65&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Paul Konerko&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.373&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.393&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl65&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Jason Heyward&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.373&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.393&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl65&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Matt Holliday&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.371&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.390&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl65&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Carlos Ruiz&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.371&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.400&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl65&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Manny Ramirez&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.371&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.409&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl65&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Billy Butler&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.370&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.388&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl65&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Jayson Werth&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.370&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.388&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl65&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Ryan Zimmerman&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.369&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl66&#34; style=&#34;border-left: medium none; border-top: medium none;&#34;&gt;0.388&lt;/td&gt;  &lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;br /&gt;And here is a list of the lowest posterior mean OBP:&lt;br /&gt;&lt;br /&gt;&lt;table border=&#34;0&#34; cellpadding=&#34;0&#34; cellspacing=&#34;0&#34; style=&#34;width: 245px;&#34;&gt;&lt;colgroup&gt;&lt;col style=&#34;width: 98pt;&#34; width=&#34;131&#34;&gt;&lt;/col&gt;  &lt;col style=&#34;width: 29pt;&#34; width=&#34;39&#34;&gt;&lt;/col&gt;  &lt;col style=&#34;width: 56pt;&#34; width=&#34;75&#34;&gt;&lt;/col&gt;  &lt;/colgroup&gt;&lt;tbody&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl66&#34; height=&#34;20&#34; style=&#34;height: 15pt; width: 98pt;&#34; width=&#34;131&#34;&gt;&lt;b&gt;Batter&lt;/b&gt;&lt;/td&gt;   &lt;td class=&#34;xl66&#34; style=&#34;border-left: medium none; width: 29pt;&#34; width=&#34;39&#34;&gt;&lt;b&gt;Posterior Mean&lt;/b&gt;&lt;/td&gt;   &lt;td class=&#34;xl66&#34; style=&#34;border-left: medium none; width: 56pt;&#34; width=&#34;75&#34;&gt;&lt;b&gt;Actual OBP&lt;/b&gt;&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl66&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Brandon Wood&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl65&#34;&gt;0.252&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl67&#34; style=&#34;border-top: medium none;&#34;&gt;0.175&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl66&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Pedro Feliz&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl65&#34;&gt;0.271&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl67&#34; style=&#34;border-top: medium none;&#34;&gt;0.240&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl66&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Jeff Mathis&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl65&#34;&gt;0.276&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl67&#34; style=&#34;border-top: medium none;&#34;&gt;0.219&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl66&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Garret   Anderson&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl65&#34;&gt;0.277&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl67&#34; style=&#34;border-top: medium none;&#34;&gt;0.204&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl66&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Adam Moore&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl65&#34;&gt;0.281&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl67&#34; style=&#34;border-top: medium none;&#34;&gt;0.230&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl66&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Josh Bell&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl65&#34;&gt;0.285&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl67&#34; style=&#34;border-top: medium none;&#34;&gt;0.224&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl66&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Jose Lopez&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl65&#34;&gt;0.286&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl67&#34; style=&#34;border-top: medium none;&#34;&gt;0.270&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl66&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Peter Bourjos&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl65&#34;&gt;0.287&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl67&#34; style=&#34;border-top: medium none;&#34;&gt;0.237&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl66&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Aaron Hill&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl65&#34;&gt;0.287&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl67&#34; style=&#34;border-top: medium none;&#34;&gt;0.271&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl66&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Tony Abreu&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl65&#34;&gt;0.288&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl67&#34; style=&#34;border-top: medium none;&#34;&gt;0.244&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl66&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Koyie Hill&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl65&#34;&gt;0.291&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl67&#34; style=&#34;border-top: medium none;&#34;&gt;0.254&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl66&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Gerald Laird&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl65&#34;&gt;0.291&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl67&#34; style=&#34;border-top: medium none;&#34;&gt;0.263&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl66&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Drew Butera&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl65&#34;&gt;0.291&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl67&#34; style=&#34;border-top: medium none;&#34;&gt;0.237&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl66&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Jeff Clement&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl65&#34;&gt;0.291&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl67&#34; style=&#34;border-top: medium none;&#34;&gt;0.237&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl66&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Matt Carson&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl65&#34;&gt;0.291&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl67&#34; style=&#34;border-top: medium none;&#34;&gt;0.193&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl66&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Humberto   Quintero&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl65&#34;&gt;0.292&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl67&#34; style=&#34;border-top: medium none;&#34;&gt;0.262&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl66&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Wil Nieves&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl65&#34;&gt;0.292&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl67&#34; style=&#34;border-top: medium none;&#34;&gt;0.244&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl66&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Matt   Tuiasosopo&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl65&#34;&gt;0.292&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl67&#34; style=&#34;border-top: medium none;&#34;&gt;0.234&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl66&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Luis Montanez&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl65&#34;&gt;0.292&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl67&#34; style=&#34;border-top: medium none;&#34;&gt;0.155&lt;/td&gt;  &lt;/tr&gt;&lt;tr height=&#34;20&#34; style=&#34;height: 15pt;&#34;&gt;   &lt;td class=&#34;xl66&#34; height=&#34;20&#34; style=&#34;border-top: medium none; height: 15pt;&#34;&gt;Cesar Izturis&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl65&#34;&gt;0.292&lt;/td&gt;   &lt;td align=&#34;right&#34; class=&#34;xl67&#34; style=&#34;border-top: medium none;&#34;&gt;0.277&lt;/td&gt;  &lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;br /&gt;You can see that all of the posterior means are pulled closer to the overall mean (the good players look worse and the bad players look better). The order changes a little bit but not too much. &lt;br /&gt;&lt;br /&gt;You can see the effect of sample size (PAs) by comparing Justin Morneau with Joey Votto. Morneau had a higher OBP, but Votto ended up with a higher posterior mean because he had more PAs (Votto had 648 while Morneau had 348). Here are their posterior distributions:&lt;br /&gt;&lt;div class=&#34;separator&#34; style=&#34;clear: both; text-align: center;&#34;&gt;&lt;a href=&#34;http://1.bp.blogspot.com/_qD9db1gpElc/TR1tYF814sI/AAAAAAAAFhY/4-gKxwH1JgY/s1600/distcompare.jpg&#34; imageanchor=&#34;1&#34; style=&#34;clear: left; float: left; margin-bottom: 1em; margin-right: 1em;&#34;&gt;&lt;img border=&#34;0&#34; src=&#34;http://1.bp.blogspot.com/_qD9db1gpElc/TR1tYF814sI/AAAAAAAAFhY/4-gKxwH1JgY/s1600/distcompare.jpg&#34; /&gt;&lt;/a&gt;&lt;/div&gt;&lt;br /&gt;&lt;br /&gt;Because of the additional PAs, you can see that the distribution of Votto is a little tighter than Morneau. We are more sure that Votto is excellent than we are sure that Morneau is excellent.&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>
